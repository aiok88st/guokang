<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>国康商城 - 欢迎登陆</title>
	<link rel="stylesheet" type="text/css" href="./css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="./css/login.css">
	<script type="text/javascript" src='./js/jquery-3.2.1.min.js'></script>
	<script type="text/javascript" src='./js/bootstrap.min.js'></script>
</head>
<body>
	<!-- 顶部 -->
	<div class="header">
		<div class="container">
			<a href="javascript:;"><img class="logo" src="./img/shop/logo.png" alt=""></a>
		</div>
	</div>
	<!-- 主体内容 -->
	<div class="main container-fluid">
		<div class="container">
			<div class="layer layer-login">
				<h3>账号登录</h3>
				<form>
					<input type="text" class="form-control input-lg" id="loginUser" placeholder="手机号/邮箱">
					<input type="password" class="form-control input-lg" id="loginPwd" placeholder="密码">
					<div class="checkbox">
						<label>
							<input id="autoLogin" type="checkbox"><small>两周内自动登录</small>
						</label>
						<small><a class="btn-gotoFtPwd" href="#forgotPwd">忘记密码？</a></small>
					</div>
					<button type="submit" class="btn btn-primary btn-block btn-lg btn-login">登录</button>
					<a href="javascript:;" class="btn btn-default btn-block btn-lg btn-gotoReg">注册国康账号</a>
				</form>
			</div>
			<div class="layer layer-reg">
				<h3>注册国康账号</h3>
				<form>
					<input type="text" class="form-control input-lg" id="regPhone" placeholder="手机号">
					<input type="password" class="form-control input-lg" id="regCode" placeholder="请输入验证码">
					<div class="checkbox">
						<label>
							<input id="isAgree" type="checkbox"><small>我已阅读并同意 <a href="javascript:;">《国康健康服务协议》</a></small>
						</label>
					</div>
					<button type="submit" class="btn btn-primary btn-block btn-lg btn-reg">注册</button>
					<a href="javascript:;" class="btn btn-default btn-block btn-lg btn-backLogin">返回登录</a>
				</form>
			</div>
		</div>
	</div>
	<div class="forgotPwd container-fluid">
		<div class="box">
			<div class="logo"></div>
			<h4>找回密码</h4>
			<div class="wrap step-1" style="display: block;">
				<p><small>请输入要找回的密码账号</small></p>
				<form>
					<input type="text" class="form-control input-lg" id="userAccount" placeholder="请输入手机号/邮箱">
					<a  type="button" class="btn btn-primary btn-block btn-lg btn-next-1">下一步</a>
				</form>
			</div>
			<div class="wrap step-2">
				<p><small>验证吗已发送至手机 <span id="showPhone">137****9283</span></small></p>
				<form class="form-inline">
					<div class="form-group">
						<div class="input-group">
							<input type="text" class="form-control input-lg" id="msgCode" placeholder="请输入短信验证码">
							<span class="input-group-btn">
								<a href="javascript:getCode();" class="btn btn-default input-lg" id="btn-getCode" type="button">获取验证码</a>
							</span>
						</div>
					</div>
					<a  type="button" class="btn btn-primary btn-block btn-lg btn-next-2">下一步</a>
				</form>
				<p class="tip"><small>短信可能会延时，请耐心等待，如果长时间未收到短信，请60秒后重新获取。</small></p>
			</div>
			<div class="wrap step-3">
				<p><small>请设置密码</small></p>
				<form>
					<div class="form-group">
						<div class="input-group">
							<input type="password" class="form-control input-lg" id="newPwd" placeholder="新密码(6-8位字母和数字组合)">
							<div class="eye visible"></div>
						</div>
					</div>
					<input type="password" class="form-control input-lg" id="confirmPwd" placeholder="请再次确认">
					<a  type="button" class="btn btn-primary btn-block btn-lg" id="btnSubmitNewPwd">完成</a>
				</form>
			</div>
		</div>
	</div>
	<!-- 备案信息 -->
	<div class="record-bg">
		<p class="record">Copyright © 2005-2017 guokang,All Rights Reserved. <br/>
		<span class="gray">深圳市国康健康管理服务有限公司|深圳市国康保险经纪有限公司  © 版权所有   粤ICP备13080796号-2</span></p>
	</div>
	
	<script src="js/utils.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		//忘记密码
		$(".btn-gotoFtPwd").on("click",function(){
			$('.forgotPwd').show();
			$("body").css('background',"#f7f7f7");
		})
		$(".btn-gotoReg").on("click",function(){
			$('.layer-login').hide();
			$('.layer-reg').show();
		})
		$(".btn-backLogin").on("click",function(){
			$('.layer-reg').hide();
			$('.layer-login').show();
		})
		
		
		
		
		$(".btn-next-1").on("click",function(){
			var userAccount = $("#userAccount").val();
			if(validatePhone(userAccount)||validateEmail(userAccount)){
				$(".step-1").hide();
				$(".step-2").show();
				$("#showPhone").text(encryptPhone(userAccount));
			}else{
				alert("请输入正确的手机/邮箱！");
			}
		})
		
		
		//获取验证码
		function getCode() {
			timedown();
		}
		//手机动态码按钮倒数计时
		var _time = 60,
			tipTimer = null;
		function timedown() {
			var t = $("#btn-getCode");
			t.attr("style", "");
			t.attr("href", "javascript:getCode();");
			if(_time == 0) {
				t.text("获取验证码");
				_time = 60;
			} else {
				t.attr("style", "color: #333;");
				t.attr("href", "#");
				t.text("重新获取(" + _time + ")");
				_time--;
				setTimeout(function() {
					timedown(t)
				}, 1000);
			}
		}
		
		//提交短信验证码
		$(".btn-next-2").on("click",function(){
			var msgCode = $("#msgCode").val();
			if(validateCode(msgCode)){
//				$.ajax({
//					type: "POST",
//					async: false,
//					cache: false,
//					url: "xxx",
//					data: {},
//					success: function(data) {
						$(".step-2").hide();
						$(".step-3").show();
//					}
//				});
			}else{
				alert("请输入正确的短信验证码！");
			}
		})

		
		//密码是否明文可见
		switchPwd()
		function switchPwd() {
			var passwordeye = $('.eye');
			var showPwd = $("#newPwd");
			passwordeye.off('click').on('click', function() {
				if(passwordeye.hasClass('visible')) {
					passwordeye.removeClass('visible'); //密码不可见
					showPwd.prop('type', 'password');
				} else {
					passwordeye.addClass('visible'); //密码可见
					showPwd.prop('type', 'text');
				};
			});
		}
		
		//提交密码修改
		$("#btnSubmitNewPwd").on("click",function(){
			var newPwd = $("#newPwd").val();
			var confirmPwd = $("#confirmPwd").val();
			var regExp = /^[A-z0-9]{6,8}$/;
			if(newPwd==""){
				alert("请输入新密码(6-8位字母和数字组合)！");
				return;
			}
			if(!regExp.test(newPwd)){
				alert("您输入的密码不符合要求，请重新输入(6-8位字母和数字组合)！");
				return;
			}
			if(confirmPwd==""){
				alert("请输入新密码(6-8位字母和数字组合)！");
				return;
			}
			if(newPwd!=confirmPwd){
				alert("两次输入的密码不一致，请重新输入");
				return;
			}
//			$.ajax({
//				type: "POST",
//				async: false,
//				cache: false,
//				url: "xxx",
//				data: {},
//				success: function(data) {
//					
//				}
//			});
		})
		
		
	</script>
</body>
</html>