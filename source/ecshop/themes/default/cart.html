<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>国康商城 - 我的购物车</title>
	<link rel="stylesheet" type="text/css" href="./css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="./css/public.css">
	<link rel="stylesheet" type="text/css" href="./css/cart.css">
	<script type="text/javascript" src='./js/jquery-3.2.1.min.js'></script>
	<script type="text/javascript" src='./js/bootstrap.min.js'></script>
</head>
<body>
	<!-- 顶部导航条 -->
	<nav class='navbar navbar-default navbar-fixed-top navbar-inverse'>
		<div class="container">
			<div class="navbar-header">
				<button class="navbar-toggle" data-toggle='collapse' data-target='#firstNav'>
					<span class='icon-bar'></span>
					<span class='icon-bar'></span>
					<span class='icon-bar'></span>
				</button>
			</div>
			<div id="firstNav" class="collapse navbar-collapse">
				<ul class="nav navbar-nav navbar-left">
					<li><a href="javascript:;">国康商城</a></li>
					<li><a href="javascript:;">保险社区</a></li>
					<li><a href="javascript:;">关于我们</a></li>
					<li><a href="javascript:;">问题反馈</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="login.html">登陆</a></li>
					<li><a href="javascript:;">注册</a></li>
					<li><a href="javascript:;">消息通知</a></li>
					<li><a href="javascript:;"><span class="glyphicon icon01" aria-hidden="true"></span> 购物车（ 0 ）</a></li>
				</ul>
			</div>
			
		</div>
	</nav>
	<!-- 第二导航条 -->
	<nav class='navbar navbar-default second-nav'>
		<div class="container">
			<div class="navbar-header">
				<button class="navbar-toggle" data-toggle='collapse' data-target='#secongNav'>
					<span class='icon-bar'></span>
					<span class='icon-bar'></span>
					<span class='icon-bar'></span>
				</button>
				<a class="navbar-brand" href="#">
			        <img alt="Brand" src="./img/logo.png" class="img-responsive">
			     </a>
			</div>
			<div id="secongNav" class="collapse navbar-collapse">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="javascript:;">首页</a></li>
					<li><a href="javascript:;">产品中心</a></li>
					<li><a href="javascript:;">解决方案</a></li>
					<li><a href="javascript:;">优质资源</a></li>
					<li><a href="javascript:;">服务体系</a></li>
					<li><a href="javascript:;">品牌体系</a></li>
					<li><a href="javascript:;">新闻资讯</a></li>
					<li><a href="javascript:;">了解国康</a></li>
					<li><a href="javascript:;">保险社区</a></li>
				</ul>
			</div>
			
			
		</div>
	</nav>
	
	<div class="container main">
		<div class="cartList">
			<div class="row border-bottom list-header">
				<h4>购物车</h4>
			</div>
			<ul class="list-unstyled">
				<li class="row border-bottom">
					<div class="col-lg-3">
						<div class="row">
							<div class="pull-left form-group list-checkbox">
								<label for="product1"></label>
								<input id="product1" type="checkbox" value="0">
							</div>
							<div class="pull-left pic">
								<img src="img/shop/img-product.jpg"/>
							</div>
						</div>
					</div>
					<div class="col-lg-9 list-msg">
						<div class="row border-bottom">
							<div class="pull-left list-msg-name">国康健康重大疾病保险计划</div>
							<div class="pull-left text-center list-msg-prize">¥ <span class="product-prize">500.00</span></div>
							<div class="pull-left list-msg-num">
								<div class="input-group">
									<span class="input-group-btn">
										<button class="btn btn-default input-lg border-unright btn-reduce" type="button">-</button>
									</span>
									<input type="text" class="form-control input-lg border-unright border-unleft input-amount" value="1">
									<span class="input-group-btn">
										<button class="btn btn-default input-lg border-unleft btn-add" type="button">+</button>
									</span>
								</div>
							</div>
							<div class="pull-right list-msg-delet">
								<span class="glyphicon glyphicon-trash" aria-hidden="true" title="删除订单"></span>
							</div>
						</div>
						<div class="row">
							<span class="list-label">重大疾病70种</span>
							<span class="list-label">轻症30种</span>
							<span class="list-label">私人医生服务</span>
						</div>
					</div>
				</li>
				<li class="row border-bottom">
					<div class="col-lg-3">
						<div class="row">
							<div class="pull-left form-group list-checkbox">
								<label for="product1"></label>
								<input id="product1" type="checkbox" value="0">
							</div>
							<div class="pull-left pic">
								<img src="img/shop/img-product.jpg"/>
							</div>
						</div>
					</div>
					<div class="col-lg-9 list-msg">
						<div class="row border-bottom">
							<div class="pull-left list-msg-name">国康健康重大疾病保险计划</div>
							<div class="pull-left text-center list-msg-prize">¥ <span class="product-prize">600.00</span></div>
							<div class="pull-left list-msg-num">
								<div class="input-group">
									<span class="input-group-btn">
										<button class="btn btn-default input-lg border-unright btn-reduce" type="button">-</button>
									</span>
									<input type="text" class="form-control input-lg border-unright border-unleft input-amount" value="1">
									<span class="input-group-btn">
										<button class="btn btn-default input-lg border-unleft btn-add" type="button">+</button>
									</span>
								</div>
							</div>
							<div class="pull-right list-msg-delet">
								<span class="glyphicon glyphicon-trash" aria-hidden="true" title="删除订单"></span>
							</div>
						</div>
						<div class="row">
							<span class="list-label">重大疾病70种</span>
							<span class="list-label">轻症30种</span>
							<span class="list-label">私人医生服务</span>
						</div>
					</div>
				</li>
				<li class="row border-bottom">
					<div class="col-lg-3">
						<div class="row">
							<div class="pull-left form-group list-checkbox">
								<label for="product1"></label>
								<input id="product1" type="checkbox" value="0">
							</div>
							<div class="pull-left pic">
								<img src="img/shop/img-product.jpg"/>
							</div>
						</div>
					</div>
					<div class="col-lg-9 list-msg">
						<div class="row border-bottom">
							<div class="pull-left list-msg-name">国康健康重大疾病保险计划</div>
							<div class="pull-left text-center list-msg-prize">¥ <span class="product-prize">700.00</span></div>
							<div class="pull-left list-msg-num">
								<div class="input-group">
									<span class="input-group-btn">
										<button class="btn btn-default input-lg border-unright btn-reduce" type="button">-</button>
									</span>
									<input type="text" class="form-control input-lg border-unright border-unleft input-amount" value="1">
									<span class="input-group-btn">
										<button class="btn btn-default input-lg border-unleft btn-add" type="button">+</button>
									</span>
								</div>
							</div>
							<div class="pull-right list-msg-delet">
								<span class="glyphicon glyphicon-trash" aria-hidden="true" title="删除订单"></span>
							</div>
						</div>
						<div class="row">
							<span class="list-label">重大疾病70种</span>
							<span class="list-label">轻症30种</span>
							<span class="list-label">私人医生服务</span>
						</div>
					</div>
				</li>
			</ul>
			<div class="row list-footer">
				<div class="pull-left btn-keepShopping">
					<span class="icon-cart"></span>
					<span>继续购物</span>
				</div>
				<div class="pull-right box-pay">
					<div class="text"><span class="pull-left">应付</span><span class="pull-right"><span class="fontSize24 red">¥</span> <span class="total red">0.00</span></span></div>
					<a class="btn btn-primary btn-lg pull-right btn-gotoPay"><small>去结算</small></a>
				</div>
			</div>
		</div>
		<div class="emptyCart">
			<p class="text-center">亲，您的购物车里还没有物品哦</p>
			<a href="javascript:;" class="btn btn-primary btn-lg" role="button">去商城</a>
		</div>
	</div>

	<!-- 底部内容 -->
	<div class="footer">
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-sm-9">
					<div class="row">
						<div class="col-xs-6 col-sm-4 col-md-2">
							<h4>帮助中心</h4>
							<ul class="list-unstyled">
								<li><a href="javascript:;">购物指南</a></li>
								<li><a href="javascript:;">服务说明</a></li>
								<li><a href="javascript:;">支付方式</a></li>
								<li><a href="javascript:;">常见问题</a></li>
							</ul>
						</div>
						<div class="col-xs-6 col-sm-4 col-md-2">
							<h4>帮助中心</h4>
							<ul class="list-unstyled">
								<li><a href="javascript:;">购物指南</a></li>
								<li><a href="javascript:;">服务说明</a></li>
								<li><a href="javascript:;">支付方式</a></li>
								<li><a href="javascript:;">常见问题</a></li>
							</ul>
						</div>
						<div class="col-xs-6 col-sm-4 col-md-2">
							<h4>帮助中心</h4>
							<ul class="list-unstyled">
								<li><a href="javascript:;">购物指南</a></li>
								<li><a href="javascript:;">服务说明</a></li>
								<li><a href="javascript:;">支付方式</a></li>
								<li><a href="javascript:;">常见问题</a></li>
							</ul>
						</div>
						<div class="col-xs-6 col-sm-4 col-md-2">
							<h4>帮助中心</h4>
							<ul class="list-unstyled">
								<li><a href="javascript:;">购物指南</a></li>
								<li><a href="javascript:;">服务说明</a></li>
								<li><a href="javascript:;">支付方式</a></li>
								<li><a href="javascript:;">常见问题</a></li>
							</ul>
						</div>
						<div class="col-xs-6 col-sm-4 col-md-2">
							<h4>帮助中心</h4>
							<ul class="list-unstyled">
								<li><a href="javascript:;">购物指南</a></li>
								<li><a href="javascript:;">服务说明</a></li>
								<li><a href="javascript:;">支付方式</a></li>
								<li><a href="javascript:;">常见问题</a></li>
							</ul>
						</div>
						<div class="col-xs-6 col-sm-4 col-md-2">
							<h4>帮助中心</h4>
							<ul class="list-unstyled">
								<li><a href="javascript:;">购物指南</a></li>
								<li><a href="javascript:;">服务说明</a></li>
								<li><a href="javascript:;">支付方式</a></li>
								<li><a href="javascript:;">常见问题</a></li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-3">
					<h4>
						<a href="tel:4006788500">400-6788-500</a>
					</h4>
					<img src="img/icon03.png" alt="">
					<img src="img/icon03.png" alt="">
				</div>
			</div>
		</div>
	</div>
	<!-- 备案信息 -->
	<div class="record-bg">
		<p class="record">Copyright © 2005-2017 guokang,All Rights Reserved.          　粤ICP备13080796号-2<br/>深圳市国康健康管理服务有限公司|深圳市国康保险经纪有限公司　©　版权所有</p>
	</div>
	<script src="js/utils.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		$(function(){
			var cartList = [
				{
					isChecked: false,
					prize: 500.00,
					amount: 1
				},
				{
					isChecked: false,
					prize: 600.00,
					amount: 1
				},
				{
					isChecked: false,
					prize: 700.00,
					amount: 1
				}
			];
			
			// 勾选订单
			$(".list-checkbox label").on("click",function(){
				var self = $(this);
				var index = self.index(".list-checkbox label");
				if(self.hasClass("checked")){
					self.removeClass("checked");
					cartList[index].isChecked = false;
				}else{
					self.addClass("checked");
					cartList[index].isChecked = true;
				}
				setTotal()
	//			console.log(cartList)
			})
			
			// 订单产品数量减少
			$('.btn-reduce').on("click",function(){
				var self = $(this);
				var oInput = self.parent().siblings(".input-amount");
				var index = self.index('.btn-reduce');
				var amount = oInput.val();
				amount--;
				if (amount<=0) {
					amount = 0;
				}
				oInput.val(amount);
				cartList[index].amount = amount;
				self.parents(".list-msg-num").siblings(".list-msg-prize").children(".product-prize").text((cartList[index].prize*amount).toFixed(2));
				setTotal()
			});
			// 订单产品数量增加
			$('.btn-add').on("click",function(){
				var self = $(this);
				var oInput = self.parent().siblings(".input-amount");
				var index = self.index('.btn-add');
				var amount = oInput.val();
				amount++;
				oInput.val(amount);
				cartList[index].amount = amount;
				self.parents(".list-msg-num").siblings(".list-msg-prize").children(".product-prize").text((cartList[index].prize*amount).toFixed(2));
				setTotal()
			});
			// 直接修改订单产品数量
			$(".input-amount").on("change",function(){
				var self = $(this);
				var amount = self.val();
				if(typeof amount !=Number){
					alert("请输入数字！");
					self.val(0)
					return;
				}
				var index = self.index(".input-amount");
				cartList[index].amount = amount;
				self.parents(".list-msg-num").siblings(".list-msg-prize").children(".product-prize").text((cartList[index].prize*amount).toFixed(2));
				setTotal()
			});
			//设置应付总额
			function setTotal(){
				var total = 0;
				for(var i=0;i<cartList.length;i++){
					if(cartList[i].isChecked){
						total += (cartList[i].prize * cartList[i].amount);
						console.log(total)
					}
				}
				$(".total").text(total.toFixed(2));
			}
			
			//删除订单
			$(".list-msg-delet span").on("click",function(){
				var index = $(this).index(".list-msg-delet span");
				$(this).parents("li").remove();
				cartList.splice(index,1);
				setTotal()
	//			console.log(cartList)
			})
			
			//去结算
			$(".btn-gotoPay").on("click",function(){
				
	//			$.ajax({
	//				url: "xxx",
	//				data:{
	//					name: name,
	//					phone: phone,
	//					address: address,
	//				},
	//				success: function(){
						location.href = "order_details.html";
	//				}
	//			})
				return false;
			})
			
		})
	</script>
</body>
</html>